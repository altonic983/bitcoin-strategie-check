<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin 5€ Strategie</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-slate-900 text-slate-100 font-sans">
    <div class="container mx-auto px-4 py-8 max-w-5xl">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-yellow-500">Bitcoin 5€ Assistent</h1>
            <p id="last-update" class="text-slate-400 mt-2 italic">Lade Daten...</p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">
            <div class="bg-slate-800 p-8 rounded-3xl border-2 border-yellow-500/50 shadow-2xl text-center">
                <span class="text-slate-400 uppercase text-sm tracking-widest">Heutige Aktion</span>
                <div id="action-today" class="text-5xl font-black mt-2 tracking-tighter">---</div>
                <div id="amount-today" class="text-xl text-slate-300 mt-1">0.00 €</div>
            </div>
            <div class="bg-slate-800 p-8 rounded-3xl border border-slate-700 shadow-xl text-center">
                <span class="text-slate-400 uppercase text-sm tracking-widest">Backtest Erfolg</span>
                <div id="perf-pct" class="text-5xl font-black mt-2 text-white">0%</div>
                <p id="perf-details" class="text-slate-400 text-sm mt-1 italic">Simulation wird geladen...</p>
            </div>
        </div>

        <div class="bg-slate-800 rounded-2xl border border-slate-700 overflow-hidden shadow-xl">
            <table class="w-full text-left text-sm">
                <thead class="bg-slate-700 text-slate-300 uppercase text-xs">
                    <tr>
                        <th class="p-4">Datum</th>
                        <th class="p-4">Kurs</th>
                        <th class="p-4">RSI</th>
                        <th class="p-4">Score</th>
                        <th class="p-4 text-right">Aktion</th>
                    </tr>
                </thead>
                <tbody id="table-body" class="divide-y divide-slate-700 text-slate-200"></tbody>
            </table>
        </div>
    </div>

    <script>
    async function loadDashboard() {
        const response = await fetch('./data.json?t=' + Date.now());
        const data = await response.json();
        
        document.getElementById('last-update').innerText = `Stand: ${data.last_update}`;
        
        const latest = data.table[0];
        const actionEl = document.getElementById('action-today');
        actionEl.innerText = latest.signal;
        actionEl.className = `text-5xl font-black mt-2 tracking-tighter ${latest.signal === 'KAUFEN' ? 'text-green-400' : 'text-red-400'}`;
        document.getElementById('amount-today').innerText = latest.invest_today + " investieren";

        document.getElementById('perf-pct').innerText = (data.backtest.performance > 0 ? "+" : "") + data.backtest.performance + "%";
        document.getElementById('perf-details').innerText = `Aus ${data.backtest.invested}€ wurden ${data.backtest.current_value}€`;

        const tbody = document.getElementById('table-body');
        data.table.forEach(row => {
            const tr = document.createElement('tr');
            const color = row.signal === 'KAUFEN' ? 'text-green-400 font-bold' : 'text-slate-500';
            tr.innerHTML = `
                <td class="p-4">${row.date}</td>
                <td class="p-4 font-mono">${row.price.toLocaleString()} €</td>
                <td class="p-4">${row.rsi}</td>
                <td class="p-4">${row.score}%</td>
                <td class="p-4 text-right ${color}">${row.signal} (${row.invest_today})</td>
            `;
            tbody.appendChild(tr);
        });
    }
    loadDashboard();
    </script>
</body>
</html>
